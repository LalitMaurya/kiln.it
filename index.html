<!DOCTYPE html>
<html>
<head>
  <title>Kiln = Journalism + Data + Technology + Design</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script src="d3.v3.min.js" charset="utf-8"></script>
  <link type="text/css" rel="stylesheet" href="http://fast.fonts.net/cssapi/411dcd77-eeeb-4bf0-a0c2-7cdf19f88192.css"/>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/css/bootstrap.min.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
  <div class="topbar"></div>
  <div class="container">
    <div class="row-fluid toprow">
      <div class="logoholder">
        <a href="/"><img src="/images/kilnlogo50.png"></a>
      </div>
      <div id="menu">
        <div id="menuitems">
          <div class="menuitem menuselected"><a href="/">Projects</a></div>
          <div class="menuitem"><a href="/about">About</a></div>
          <div class="menuitem"><a href="/about#contact">Contact</a></div>
        </div>
      </div>
    </div>
  </div>
  <div>
    <div class="row-fluid">
      <div id="myCarousel" class="carousel slide" data-interval="10000">
        <ol class="carousel-indicators">
          <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#myCarousel" data-slide-to="1"></li>
          <li data-target="#myCarousel" data-slide-to="2"></li>
          <li data-target="#myCarousel" data-slide-to="3"></li>
          <li data-target="#myCarousel" data-slide-to="4"></li>
        </ol>
        <!-- Carousel items -->
        <div class="carousel-inner">
          <div class="active item">
            <a href="/about">
              <div class="carousel-textholder">
                <div class="carousel-text-splash">
                  <h1 class="splash">We turn <em class="data"><span class="font-awesome">&#xF012;</span>&nbsp;data</em>&nbsp;into <em><span class="font-awesome">&#xF0A6;</span>&nbsp;interactives</em>, <em><span class="font-awesome">&#xF041;</span>&nbsp;maps</em> and <em><span class="font-awesome">&#xF06E;</span>&nbsp;visualisations</em></h1>
                  <!-- <p>We make sense of complex data and concepts and use it to tell stories, inform and entertain.</p> -->
                  <button type="button" class="btn btn-kiln">Find out more</button>
                </div>
              </a>
            </div>
          </div>
          <div class="item" id="carousel-opencorporates">
            <a href="/projects/opencorporates">
              <div class="carousel-textholder">
                <div class="carousel-text">
                  <h1>Goldman Maps</h1>
                  <p>Interactive maps of the world’s biggest banks</p>
                  <button type="button" class="btn btn-kiln">View project</button>
                </div>
              </div>
            </a>
          </div>
          <div class="item">
            <a href="/talkie">
              <object id="talkie-svg" class="carousel-svg" data="/images/carousel-talkie.svg" type="image/svg+xml" onload="carouselTalkie()"></object>
              <div class="carousel-textholder">
                <div class="carousel-text carousel-talkie">
                  <h1>Talkie</h1>
                  <p>Bringing interactives to life</p>
                  <button type="button" class="btn btn-kiln">View project</button>
                </div>
              </div>
            </a>
          </div>
          <div class="item" id="carousel-carbonmap">
            <a href="/projects/carbonmap">
              <div class="carousel-textholder">
                <div class="carousel-text">
                  <h1>Carbon Map</h1>
                  <p>The world’s first interactive ‘squishy map’</p>
                  <button type="button" class="btn btn-kiln">View project</button>
                </div>
              </div>
            </a>
          </div>
          <div class="item" id="datastories">
            <a href="/talkie">
              <div id="play-animation"></div>
              <div class="carousel-textholder">
                <div class="carousel-text carousel-talkie">
                  <h1>Storytelling</h1>
                  <p>Good interactives should tell a story</p>
                </div>
              </div>
            </a>
          </div>
        </div>
        <!-- Carousel nav -->
        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
      </div>
    </div>  
    <div class="row-fluid project-area">
      <div class="row projecthead">
        <h2>Recent projects</h2>
      </div>
      <div class="row projectrow projectright">
        <div class="projectcontent">
          <a href="/projects/opencorporates">
            <div class="projectimage"><img class="projectcolour" src="/images/opencorps.gif"><img class="projectbw" src="/images/opencorpsbw.gif"></div>
            <div class="projecttextholder">
              <div class="projecttext"><h3>Goldman Maps</h3><p>Interactive maps of the corporate structures of global banks such as Goldman Sachs.</p></div>
            </div>
            <div class="projectwedge"></div>
          </a>
        </div>
      </div>
      <div class="row projectrow projectleft">
        <div class="projectcontent">
          <a href="/projects/unburnablecarbon">
            <div class="projectimage"><img class="projectcolour" src="/images/carbontracker.gif"><img class="projectbw" src="/images/carbontrackerbw.gif"></div>
            <div class="projecttextholder">
              <div class="projecttext"><h3>Unburnable Carbon</h3><p>An interactive animation and map exploring ‘unburnable’ fossil fuel reserves.</p></div>
            </div>
            <div class="projectwedge"></div>
          </a>
        </div>
      </div>
      <div class="row projectrow projectright">
        <div class="projectcontent">
          <a href="/projects/betterorworse">
            <div class="projectimage"><img class="projectcolour" src="/images/betterorworse.gif"><img class="projectbw" src="/images/betterorworsebw.gif"></div>
            <div class="projecttextholder">
              <div class="projecttext"><h3>Better Or Worse</h3><p>An animated slideshow and poll asking whether the world is better or worse than it was 20 years ago.</p></div>
            </div>
            <div class="projectwedge"></div>
          </a>
        </div>
      </div>
      <div class="row projectrow projectleft">
        <div class="projectcontent">
          <a href="/projects/carbonmap">
            <div class="projectimage"><img class="projectcolour" src="/images/carbonmap.gif"><img class="projectbw" src="/images/carbonmapbw.gif"></div>
            <div class="projecttextholder">
              <div class="projecttext"><h3>The Carbon Map</h3><p>An interactive squishy map exploring responsibility for – and vulnerability to – climate change.</p></div>
            </div>
            <div class="projectwedge"></div>
          </a>
        </div>
      </div>
      <div class="row projectrow projectright">
        <div class="projectcontent">
          <a href="/projects/wheretheystarted">
            <div class="projectimage"><img class="projectcolour" src="/images/joinin.gif"><img class="projectbw" src="/images/joininbw.gif"></div>
            <div class="projecttextholder">
              <div class="projecttext"><h3>Where They Started</h3><p>A squishy map of UK’s Olympians. Which regions excel at which sport?</p></div>
            </div>
            <div class="projectwedge"></div>
          </a>
        </div>
      </div>
      <div class="row projectrow projectleft projectlast">
        <div class="projectcontent">
          <a href="/talkie">
            <div class="projectimage"><img class="projectcolour" src="/images/talkie.gif"><img class="projectbw" src="/images/talkiebw.gif"></div>
            <div class="projecttextholder">
              <div class="projecttext"><h3>Talkie</h3><p>Our open-source toolkit for adding voiceovers to websites, creating interactive animations and more.</p></div>
            </div>
            <div class="projectwedge"></div>
          </a>
        </div>
      </div>
      <!-- <div class="row projecthead">
        <h2>Miscellany</h2>
      </div>
      <div class="row projectrow projectright miscellany">
        <div class="projectcontent">
          <a href="/miscellany">
            <div class="projectimage"><img class="projectcolour" src="/images/carbontracker.gif"><img class="projectbw" src="/images/carbontrackerbw.gif"></div>
            <div class="projecttextholder">
              <div class="projecttext"><h3>Miscellany</h3><p>Mini-projects, graveyard and experiments.</p></div>
            </div>
            <div class="projectwedge"></div>
          </a>
        </div>
      </div> -->
    </div>
  </div>
  <div class="footer">
    <div class="footertext">
      <a href="/about">About</a> • <a href="/about#contact">Contact</a>
      <a href="/"><div id="footerlogo"></div></a> 
      <a href="https://twitter.com/k_i_l_n">Twitter</a> • <a href="https://github.com/kiln">Gitub</a>
    </div>
  </div>
  <script src="http://code.jquery.com/jquery.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"></script>
  <script>$(".carousel").carousel();</script>
  <script>
      function point_to_string(point, origin) {
          if (typeof origin == "undefined") origin = [0, 0];
          return (point[0] - origin[0]) + "," + (point[1] - origin[1]);
      }
      function points_to_string(points, origin) {
          return points.map(function(point) { return point_to_string(point, origin); }).join(" ");
      }

      // http://www.public.asu.edu/~aaafp/hinged/Dudeneytrianglesquare.html
      var root_3 = Math.sqrt(3),
          p = (3 - Math.sqrt(4*root_3 - 3))/4,
          np = 3/4 - p,
          i = ( (1/4 - p) * np + 3/16 ) / ( np*np + 3/16 ),
          e = [ p + i*np, i * root_3/4 ],
          j = ( (1/2) * np ) / ( np*np + 3/16 ),
          c = [ p + j*np, j * root_3/4 ];

      var svg = d3.select("#play-animation").append("svg").attr("viewBox", "-1 -0.6 3 2");

      // Add circle for play button
      svg.append("circle").attr("cx",0.9).attr("id","circle").attr("cy",0.4).attr("r",1).style("opacity",0).style("fill","white");

      var outer = svg.append("g").attr("transform", "translate(0,0)");
      outer.append("polygon").attr("id", "a").attr("points", points_to_string([
          [1/2, root_3/2], [3/4, root_3/4], e, [1/4, root_3/4] ]));

      function polygon(name, points, rotate_class, within, outer_origin) {
          if (typeof within == "undefined") within = outer;
          var origin = points[0], translation = [origin[0], origin[1]];
          if (typeof outer_origin != "undefined") {
              translation[0] -= outer_origin[0];
              translation[1] -= outer_origin[1];
          }
          var g = within.append("g").attr("id", name)
              .attr("transform", "translate("+point_to_string(translation)+")")
              .append("g").attr("class", rotate_class).attr("transform", "rotate(0)");
          g.append("polygon").attr("points", points_to_string(points, origin));
          var chain = function(name, points, rotate_class) {
              return polygon(name, points, rotate_class, g, origin);
          };
          chain.text = function(name, t, pos, rotate_class) {
              var new_g = g.append("g").attr("id", name).attr("transform", "translate("+point_to_string(pos, origin)+")");
              return new_g.append("g").attr("class", rotate_class).append("text").text(t);
          }
          return chain;
      }


      polygon("b", [ [1/4, root_3/4], e, [p, 0], [0, 0] ], "anticlockwise")
             ("c", [ [p, 0], c, [p+1/2, 0] ], "anticlockwise");
      polygon("d", [ [3/4, root_3/4], [1, 0], [p+1/2, 0], c ], "clockwise")
             .text("text", "KILN", [1, 0], "rotatetext").attr("transform", "translate(0.12,0) rotate(180,-0.12,0)");

      var duration = 1500,
          transforms = {
              triangle: "scale(1.5) translate(0,-0.4) rotate(150,0.5,0.5)",
              square: "scale(1.5) translate(0,-0.4) rotate(49,0.5,0.5)"
          };
      function toSquare() {
          svg.select("#circle").transition().duration(500).style("opacity",0);
          outer.transition().duration(duration).attrTween("transform", function() {
              return d3.interpolateString(transforms.triangle, transforms.square);
          });
          svg.selectAll(".anticlockwise").transition().duration(duration).attr("transform", "rotate(-180)");
          svg.selectAll(".clockwise").transition().duration(duration).attr("transform", "rotate(180)");
          svg.selectAll(".rotatetext").transition().duration(duration/2).attrTween("transform", function() {
              return d3.interpolateString("rotate(0)", "rotate(300)");
          });
          svg.transition().duration(duration).style("stroke-width", "0.01");
      }
      function toTriangle() {
          outer.transition().duration(duration).attrTween("transform", function() {
              return d3.interpolateString(transforms.square, transforms.triangle);
          });
          svg.selectAll(".anticlockwise, .clockwise").transition().duration(duration).attr("transform", "rotate(0)");
          svg.selectAll(".rotatetext").transition().delay(duration/2).duration(duration/2).attrTween("transform", function() {
              return d3.interpolateString("rotate(300)", "rotate(0)");
          });
          svg.transition().duration(duration).style("stroke-width", "0");
          svg.select("#circle").transition().duration(750).delay(duration - 500).style("opacity",0.9);
      }

      var triangle = true;
      function flip() {
          if (triangle) setTimeout(function(){ toSquare() },1000);
          else toTriangle();
          triangle = !triangle;
      }
      flip();
      setInterval(flip, duration + 2500);
  </script>
  <script>
    function carouselTalkie() {
      var svg = d3.select(document.getElementById("talkie-svg").contentDocument);      
      var lag = 150;
      svg.select("#mic1") .attr("transform", "translate(0,700)").transition().delay(lag*0) .duration(400).attr("transform", "translate(0,0)");      
      svg.select("#mic2") .attr("transform", "translate(0,700)").transition().delay(lag*1) .duration(400).attr("transform", "translate(0,0)");
      svg.select("#mic3") .attr("transform", "translate(0,700)").transition().delay(lag*2) .duration(400).attr("transform", "translate(0,0)");
      svg.select("#mic4") .attr("transform", "translate(0,700)").transition().delay(lag*3) .duration(400).attr("transform", "translate(0,0)");
      svg.select("#mic5") .attr("transform", "translate(0,700)").transition().delay(lag*4) .duration(400).attr("transform", "translate(0,0)");
      svg.select("#mic6") .attr("transform", "translate(0,700)").transition().delay(lag*5) .duration(400).attr("transform", "translate(0,0)");
      svg.select("#mic7") .attr("transform", "translate(0,750)").transition().delay(lag*6) .duration(400).attr("transform", "translate(0,0)");
      svg.select("#mic8") .attr("transform", "translate(0,750)").transition().delay(lag*7) .duration(400).attr("transform", "translate(0,0)");
      svg.select("#mic9") .attr("transform", "translate(0,800)").transition().delay(lag*8) .duration(400).attr("transform", "translate(0,0)");
      svg.select("#mic10").attr("transform", "translate(0,1000)").transition().delay(lag*9).duration(400).attr("transform", "translate(0,0)");
    }
  </script>
</body>
</html>